from time import time
Circles_functions=0
import os
import binascii
self="'"

namez = input("for compression c or e for extract: ")
#@Author Jurijus pacalovas
class encypthion_class:

    def encypthion1(self):

                 
                long3=0
                self.name = "Author: Jurijus Pacalovas"

                print(self.name)

                if namez!="c" and namez!="e":
                    print("Your enter incorrect letter")
                
                if namez=="c":


                    
                   
                    name = input("What is name of file? ")
                    if os.path.exists(name):
                            print('Path is exists!')
                    else:
                            print('Path is not exists!')
                            raise SystemExit
                   
                    
                        
                    namea=""

                    namem=""
                    namema="?"
                    Circle155=0
                    Calculusadd=""
                                             
                    Combination=-1
                    Combination1=-1      
                    Times55=0                                
                    
                    Times_of_compressionression_2 =0
                    
                    nameas=name
                    nac=len(nameas)

                    long=len(name)
                   
                    name_cut=len(".bin")
                    
                    nameas=name+".bin"
                    name_bofore=len(nameas)
                    
                    
                    

                    	 
                    nac=len(nameas)
                    
                    countraz=0
                    Circles_functions=2
                    Circles_functions1=0
                    s=""
                    
                 
                    INFO3=""
                    INFO2=""
                
                    

                    ssCircles_functions=0
                    
                    qTimes_compressionCirclesionzl=0

                    block=1

                    x=0
                    x1=0
                    x2=0
                    x = time()

                    with open(nameas, "w") as f4:
                            f4.write(s)
                    with open(nameas, "a") as f3:
                            f3.write(s)
                    with open(name, "rb") as binary_file:

                       # Read the whole file at once
                        data = binary_file.read()
                        
                
                        size_after2=len(data)
                        #print(size_after2)  
                        
                        if len(data)==0 or len(data)>2**40:
                            x4=0.0
                            print(x4)
                            raise SystemExit
                            
                      
                         

                  
                        s=str(data)
                        
                        
                        lenf1=len(data)
                          
                    
                            
  
                            
                        lenf5=len(data)
                        
                        Times_2=0
                        Times_compressionCirclesionz=0
                       
                        while Times_2<10:
                       
                            
                            

                            Circles_functions=Circles_functions+1
                            
                            countraz=countraz+1

                            with open(nameas, "ab") as f2:
                                if countraz==1:
                                    INFO=bin(int(binascii.hexlify(data),16))[2:]
                                    lenf=len(INFO)
                                    lenf1=len(data)
                                
                                    xc=(lenf1*8)-lenf
                                    z=0
                                    if xc!=0:
                                        while z<xc:
                                            INFO="0"+INFO
                                            z=z+1
                                            
                                   

                                    if countraz==1:
                                        INFO2=INFO
                            
                                    n = int(INFO2, 2)
                                
                                    binary_to_data=len(INFO2)
                                    binary_to_data=(binary_to_data/8)*2
                                    binary_to_data=str(binary_to_data)
                                    binary_to_data="%0"+binary_to_data+"x"
                             
                                    jl=binascii.unhexlify(binary_to_data % n)
                                    long6=len(jl)
                                    
                                    data=jl
                                    Times_compressionCirclesionz=Times_compressionCirclesionz+1
                                   
                                    if countraz==1:

                                        lenf5=len(data)

                                    INFO=bin(int(binascii.hexlify(data),16))[2:]
                                    lenf=len(INFO)

                                    lenf1=len(data)
                                
                                    xc=(lenf1*8)-lenf
                                    z=0
                                    if xc!=0:
                                        while z<xc:
                                            INFO="0"+INFO
                                            z=z+1

                                    INFO2=INFO

                                    if countraz==1:

                                     b2=24

                                 

                                    lenf3=len(INFO2)
                                lenf2=len(INFO2)

                                INFO11=""
                                INFO12=""
                                long21=len(INFO3)
                                limit1=0
                                INFO4="'"
                                
                                Times_of_times=0
                                
                                

                                
                                while limit1!=1:    
                                
                                    INFO4=INFO2
                                    long_B=len(INFO4)
                                    long=len(INFO4)
                                    Times_of_times+=1
                                    if Times_of_times==100:
                                        limit1
                                        
                                    
                                    
                                        
                                    
                                    info_hex=INFO4
                                    times10=0 
                                    limit=0
                                   
                                    
                                    while times10!=1:
                                        

                                        
                                        
                                        
                                    
                                    
                                        INFO3=info_hex
                                 

                                       
                                        
                                        long=len(INFO3)
                                        #print(long)
                                        
                                        
                                        #print(long)
                                       
                                       
                                        block=0
                                        
                                        blocks=21
                                        #print(blocks)
                                        
                                       
                                        Circle=""
                                        INFO3=INFO2
                                        while block<long:
                                        	

	                                        Calculust=INFO3[block:block+blocks]
	                                        if len(Calculust)!=21:
	                                        	
	                                        	Circle+="1"+Calculust
	                                        	block+=21
	                                        elif len(Calculust)==21:
	                                        #print(Calculus)
		                                        block+=21
		                                        Calculus2=Calculust[0:21]
		                                        Calculus3=-1
		                                        block2=0
		                                        not_compress=0
		                                        Times_count3=-1
		                                        Calculus4=-1
		                                        Calculus1=""
		                                        Calculus6=""
		                                        N1=0
		                                        count_times=-1
		                                        not_compress1=0
		                                        while Calculus3!=0:
		                                        	Calculus1=Calculust[block2:block2+3]
		                                        	Calculus3=int(Calculus1,2)
		                                        	Times_count3+=1
		                                        	block2+=3
		                                        	if block2==21:
		                                        		not_compress1=1
		                                        		Calculus3=0
		                                        if Times_count3==Calculus3:
		                                        	N1=0
		                                        else:
		                                        	block2=0
		                                        	count_times=-1
		                                        	Times_countr=Times_count3
		                                        	#print(Times_count3)	
		                                      
		                                        	while Times_count3!=Calculus4:
		                                        		CalculusF=Calculust[Times_count3*3:(Times_count3*3)+3]
		                                        		Calculus4=int(CalculusF,2)
		                                        		#print(Calculus4)
		                                        		Times_count3=Calculus4
		                                        		Times_count3=Calculus4
		                                        		block2+=3
		                                        		count_times+=1
		                                        		if block2==21:
		                                        			Times_count3=Calculus4
		                                        			not_compress=1
		                                        Calculus7=0
		                                        Times_count4=-1
		                                        block2=0
		                                        while Calculus7!=1:
		                                        	Calculus1=Calculust[block2:block2+3]
		                                        	Calculus12=int(Calculus1,2)
		                                        	
		                                        	if Calculus12==count_times:
		                                        		Calculus7=1
		                                        	
		                                        	Times_count4+=1
		                                        	block2+=3
		                                        	if block2==21:
		                                        		not_compress=1
		                                        		Calculus7=1                  	                                        	                      
		                                        	N1=count_times
	                                       	                                       	                                        	
		                                        if Times_count4>=Times_count3:
		                                        		not_compress=1  
		                                        
		                                         	
		                                         	  
		                                        if  Calculus3==0 and  not_compress1==0:                      		                                                                                               	
		                                        		CS=format(Times_count3,'01b')
		                                        	
		                                        		Circle+=Calculust[:Times_count3*3]+CS+Calculust[(Times_count3*3)+3:]
		                                        		#print(Calculust[:Times_count3*3]+"g"+CS+Calculust[(Times_count3*3)+3:])
		                                        		#print(Times_count3)                   		#print(Circle)
	                                        	
		                                        else:
		                                        	
		                                        	Circle+="1"+Calculust
		                                        	#print(Calculust)		                                       	                                        
	                                        #print(Circle9)
	                                        #print(Stop3)
                                                       
                                                       
                                                
                                                    
                                                
                                                
                                            
                                            #print(block)                                        
                                            
                                        
         
                                                    
                                                    
                                                    
                                         
                   
                                        

                                            
                                        
                                        times10+=1
                                       
                                            
                                        info_hex=Circle 
                                        long_after_compressionCirclesion=len(info_hex)
                                        if long==long_after_compressionCirclesion:
                                            limit=1
                                            limit1=1

                                         
                              
                                        info_hex=Circle
                                            
                                        
                                        
                                        
                                                                       
                                    
                                    encypthion=info_hex
                                    
                                   
                                    
                                    #print(Circle3)
                                    #print(Circlef)
                                    #print(limit)
                                    
                                    INFO14=""
                                    
                                    
       
                                    
                                                                        
                                    INFO12=encypthion

                                    long21=len(INFO12)
                                    #print(long21)

                                    
                                    
                                    limit1=1
                                
                               
                                    
                                
                                
             
                             
                                Stop_save=""
                                             #print(Times_do_impossible_stop)

                                
                            
                                      
                                #print(len(INFO11))
                                #print(len(INFO2))

                                INFO11=INFO12
                                INFO2=INFO11
                                
                                #print(len(INFO2))
                                
                               
                                  
                               
             
                                                                                

                                
                              
                                
                                
                                
                             
                                
                               
                                
                                    

                                
                                   
                                Times_compressionCirclesionz=Times_compressionCirclesionz+1
                    
                            
                                Times_of_compressionression_2 =Times_of_compressionression_2 +1
                                
                            
                                
                                Times55+=1
                                #print(Times55)
                                if Times55==12:
		                               
		                                INFO11="1"+INFO11
		                                
		                                
		                                lenf=len(INFO11)
		                                            
		                                add_bits118=""
		                                count_bits=8-lenf%8
		                                z=0
		                                        
		                                if count_bits!=8:
		                                    while z<count_bits:
		                                        add_bits118="0"+add_bits118
		                                        z=z+1
		                                                                        
		                                INFO11=add_bits118+INFO11
		                             
		                                n = int(INFO11, 2) 
		                                binary_to_data=len(INFO11)
		                                binary_to_data=(binary_to_data/8)*2
		                                binary_to_data=str(binary_to_data)
		                                binary_to_data="%0"+binary_to_data+"x"
		                             
		                                jl=binascii.unhexlify(binary_to_data % n)
		                                Times_2=10
		                                f2.write(jl)
		                                x2 = time()
		                                x3=x2-x
		                                return print(x3)

    def encypthion2(self):

                 
                 if namez=="e":
                    
                    name = input("What is name of file? ")
                    if os.path.exists(name):
                            print('Path is exists!')
                    else:
                            print('Path is not exists!')
                            raise SystemExit
                   
                    namea=""
                    namem=""
                    namema="?"
                    Times55=0
                    Cicle55=0
                    Combination=-1
                    Combination1=-1
                 
                    Times_of_compressionression_2 =0
                    nameas=name
                    nac=len(nameas)
                    name_cut=""
                    name_cut=len(".bin")
                    nameas=name
                    
                    name_long=len(nameas)
                    nameSS=name[name_long-name_cut:]
                    if nameSS!=".bin":
                        x3=0.0
                        return print(x3)
                        
                    nameas=name[:name_long-name_cut]
                    nac=len(nameas)
                    
                  
                    
                    long=len(nameas)

                    nac=len(nameas)
                   
                    countraz=0
                    Circles_functions=2
                    Circles_functions1=0
                    s=""
                    Calculusadd=""
                 
                    INFO3=""
                    INFO2=""
                    Circle55=0

                    ssCircles_functions=0
                    
                    qTimes_compressionCirclesionzl=0

                    block=1

                    x=0
                    x1=0
                    x2=0
                    x = time()

                    with open(nameas, "w") as f4:
                            f4.write(s)
                    with open(nameas, "a") as f3:
                            f3.write(s)
                    with open(name, "rb") as binary_file:

                       # Read the whole file at once
                        
                        data = binary_file.read()
                      
                      
                        

                        

                    
                        if len(data)==0:
                            x4=0.0
                            print(x4)
                            raise SystemExit
                     	

                        s=str(data)
                       
                        lenf1=len(data)
                        lenf5=len(data)
                        
                        Times_2=0
                        Times_compressionCirclesionz=0
                       
                        while Times_2<10:
                       
                            
                            

                            Circles_functions=Circles_functions+1
                            
                            countraz=countraz+1

                            with open(nameas, "ab") as f2:
                                if countraz==1:
                                    INFO=bin(int(binascii.hexlify(data),16))[2:]
                                    lenf=len(INFO)
                                    lenf1=len(data)
                                
                                    xc=(lenf1*8)-lenf
                                    z=0
                                    if xc!=0:
                                        while z<xc:
                                            INFO="0"+INFO
                                            z=z+1
                                            
                                   

                                    if countraz==1:
                                        INFO2=INFO
                            
                                    n = int(INFO2, 2)
                                
                                    binary_to_data=len(INFO2)
                                    binary_to_data=(binary_to_data/8)*2
                                    binary_to_data=str(binary_to_data)
                                    binary_to_data="%0"+binary_to_data+"x"
                             
                                    jl=binascii.unhexlify(binary_to_data % n)
                                    long6=len(jl)
                                    
                                    data=jl
                                    Times_compressionCirclesionz=Times_compressionCirclesionz+1
                                   
                                    if countraz==1:

                                        lenf5=len(data)

                                    INFO=bin(int(binascii.hexlify(data),16))[2:]
                                    lenf=len(INFO)

                                    lenf1=len(data)
                                
                                    xc=(lenf1*8)-lenf
                                    z=0
                                    if xc!=0:
                                        while z<xc:
                                            INFO="0"+INFO
                                            z=z+1

                                    INFO2=INFO
                                    if countraz==1:                               
	                                    Times_count=int(INFO2[:40],2)
	                                    #print(Times_count)
	                                    INFO2=INFO2[40:]
	                                    while INFO2[0:1]!="1":
	                                    
		                                    if INFO2[0:1]=="0":
		                                    	INFO2=INFO2[1:]
		                                
		                            
	                                    lenf3=len(INFO2)
	                                    INFO2=INFO2[1:]
	                                    INFO3=INFO2
	                                    Time_count2=0
	                                    #print(INFO3)
                                   
                                lenf2=len(INFO2)  
                              
                               

                                Count_add_block=0



                                
                                
                                    

                                while  Times_count!=Time_count2:
                                                                       INFO_Save=""
                                                                       
                                                                       #print(Time_count2)
                                                                       Times_do_impossible_stop=int(INFO3[:40],2)
                                                                       #print(INFO3)
                                                                       INFO3=INFO3[40:]
                                                                       block=0
                                                                       long=len(INFO3)
                                                                       #print(long)
                                                                       stop2=0
                                                                       
                                                                       
                                                                       while block<long:
                                                                       	

                                                                       	Calculus3=INFO3[block:block+24]
                                                                       	Calculus2=INFO3[block:block+23]
                                                                       	if Times_do_impossible_stop!=stop2:
                                                                       		stop2+=1
                                                                       		C5=int(Calculus2,2)
                                                                       		Calculus=format(((2**24)-1)-C5,'024b')
                                                                       		block+=23
                                                                       		
                                                                       		INFO_Save+=Calculus
                                                                       	elif Times_do_impossible_stop==stop2:
                                                                       		INFO_Save+=Calculus3
                                                                       		#print(INFO_Save)
                                                                       		block+=24

                                                                       INFO3=INFO_Save
                                                                       Time_count2+=1
                                                                        
                                                                        
                                                            
                                                            
                                                                        
                                                                                                                                                      
                                Times55=1
                                if Times55==1:
                                	n = int(INFO_Save, 2)
                                	binary_to_data=len(INFO_Save)
                                	binary_to_data=(binary_to_data/8)*2
                                	binary_to_data=str(binary_to_data)
                                	binary_to_data="%0"+binary_to_data+"x"
                                	jl=binascii.unhexlify(binary_to_data % n)
                                	f2.write(jl)
                                	x2 = time()
                                	x3=x2-x
                                	return print(x3)                                	
				
self=""                                
d=encypthion_class()
    
xw=d.encypthion1()
print(xw)

xw1=d.encypthion2()
print(xw1)